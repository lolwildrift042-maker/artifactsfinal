<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"/>
<title>ARTifacts — Responsive Prototype (Improved)</title>
<style>
  :root{
    --bg:#fff;
    --muted:#f6f6f6;
    --card:#ffffff;
    --black:#0b0b0b;
    --accent:#f6d77a;
    --bar-h:78px;
    --gap:14px;
    --max-w:1100px;
    --safe-bottom: env(safe-area-inset-bottom, 0px);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    background:var(--bg);
    color:#111;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* Screen base */
  .screen{
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:18px;
    gap:12px;
    background:var(--bg);
    transition:opacity .22s ease, transform .18s ease;
  }
  .hidden{opacity:0;pointer-events:none;transform:translateY(6px)}
  header.appbar{
    width:100%;
    max-width:var(--max-w);
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    padding:12px 20px;
    background:var(--black);
    color:#fff;
    border-radius:10px;
    flex-shrink:0;
  }
  .logo{height:40px;object-fit:contain}
  .back{
    position:absolute;
    left:14px;
    top:10px;
    color:#fff;
    background:transparent;
    border:0;
    font-size:26px;
    cursor:pointer;
    padding:6px;
    border-radius:8px;
  }

  /* Content area that scrolls (safe bottom padding so bottom bar never covers content) */
  .content{
    width:100%;
    max-width:var(--max-w);
    flex:1 1 auto;
    overflow:auto;
    -webkit-overflow-scrolling:touch;
    padding-bottom:calc(var(--bar-h) + var(--safe-bottom) + 22px);
    scroll-behavior:smooth;
  }

  /* Start */
  .start-center{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;margin-top:18px}
  .start-logo{
    width:160px;height:160px;border-radius:18px;object-fit:contain;background:#fff;padding:12px;box-shadow:0 8px 18px rgba(0,0,0,.08)
  }
  .primary{background:#000;color:#fff;padding:12px 18px;border-radius:14px;border:0;font-weight:700;cursor:pointer}
  .modes{display:flex;gap:12px;flex-direction:column;align-items:stretch;width:100%;max-width:420px}

  /* Cards & layout */
  .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 10px 24px rgba(0,0,0,.06);width:100%}
  .row{display:flex;gap:12px;align-items:center}
  .art-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
  .thumb{width:100%;aspect-ratio:1/1;border-radius:10px;overflow:hidden;background:var(--muted);display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative}
  .thumb img{width:100%;height:100%;object-fit:cover;display:block}
  .thumb .actions{position:absolute;bottom:8px;left:8px;display:flex;gap:6px}
  .small-btn{background:rgba(0,0,0,.75);color:#fff;padding:6px 8px;border-radius:8px;border:0;font-size:12px;cursor:pointer}
  .stat-row{display:flex;gap:12px;justify-content:space-between;margin-top:12px;flex-wrap:wrap}
  .stat{flex:1;min-width:140px;background:#111;color:#fff;border-radius:10px;padding:12px;text-align:center}

  /* forms */
  .field{display:flex;flex-direction:column;gap:6px;margin-top:8px}
  input[type="text"], input[type="date"], textarea{padding:10px;border-radius:10px;border:1px solid #ddd;width:100%;font-size:15px}
  textarea{min-height:96px;resize:vertical}
  .controls{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  .btn-primary{background:#111;color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
  .btn-cancel{background:#888;color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}

  /* viewer overlay */
  #viewerOverlay{
    position:fixed;inset:0;background:rgba(0,0,0,.95);
    display:flex;align-items:center;justify-content:center;z-index:120;flex-direction:column;padding:24px;
  }
  #viewerOverlay.hidden{display:none}
  #viewerImg{max-width:92vw;max-height:78vh;object-fit:contain;border-radius:8px;box-shadow:0 12px 30px rgba(0,0,0,.6)}
  .viewer-top{position:absolute;top:18px;left:18px;color:#fff;font-size:40px;cursor:pointer}
  .viewer-close{position:absolute;top:18px;right:20px;color:#fff;font-size:40px;cursor:pointer}
  .viewer-nav{position:absolute;top:50%;transform:translateY(-50%);color:#fff;font-size:46px;cursor:pointer;padding:12px;user-select:none}
  .viewer-prev{left:18px}.viewer-next{right:18px}
  .viewer-caption{color:#fff;margin-top:14px;text-align:center;max-width:92%}

  /* event gallery small */
  .art-grid.cols-3{grid-template-columns:repeat(3,1fr)}

  /* manage artworks list */
  .manage-list{display:flex;flex-direction:column;gap:12px}
  .manage-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:10px;background:#fafafa;border:1px solid #eee}
  .manage-item img{width:84px;height:84px;object-fit:cover;border-radius:8px;flex-shrink:0}

  /* bottom nav */
  .bottom-bar{
    position:fixed;
    left:12px;
    right:12px;
    bottom: calc(8px + var(--safe-bottom));
    height:var(--bar-h);
    background:#000;
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:space-around;
    gap:8px;
    padding:12px;
    border-radius:12px;
    z-index:90;
    box-shadow:0 18px 30px rgba(0,0,0,.35);
  }
  .bottom-item{cursor:pointer;text-align:center;flex:1;font-weight:600}

  /* helper / placeholder */
  .muted{color:#666;font-size:14px}

  /* responsive */
  @media (min-width:720px){
    .art-grid{grid-template-columns:repeat(3,1fr)}
    .start-logo{width:200px;height:200px}
  }
  @media (min-width:1100px){
    .art-grid{grid-template-columns:repeat(4,1fr)}
    .content{padding-left:28px;padding-right:28px}
  }

/* --- viewer overlay improvements --- */
#viewerOverlay {
  display: none;
  align-items: center;
  justify-content: center;
  transition: opacity 220ms ease, transform 220ms ease;
  opacity: 0;
  transform: translateY(6px);
  touch-action: none;
}
#viewerOverlay.visible { display:flex; opacity: 1; transform: translateY(0); }
#viewerOverlay.hidden { display:none; opacity:0; transform: translateY(6px); }

#viewerImg {
  max-width: 80vw;
  max-height: 80vh;
  object-fit: contain;
  pointer-events: none; /* let buttons receive clicks */
  touch-action: none;
  transition: transform 120ms ease;
  will-change: transform;
  border-radius: 8px;
  box-shadow: 0 12px 30px rgba(0,0,0,.6);
}

/* viewer controls positioning (if you add buttons elements, keep them above image) */
.viewer-top,
.viewer-close,
.viewer-prev,
.viewer-next {
  position: absolute;
  z-index: 9999 !important;
  background: transparent;
  border: none;
  color: #fff;
  font-size: 36px;
  cursor: pointer;
  padding: 8px;
}

/* center caption and style */
#viewerCaption {
  max-width: 92%;
  text-align: center;
  color: #fff;
  margin-top: 12px;
  font-size: 16px;
  line-height: 1.4;
}

</style>
</head>
<body>
<!-- START -->
<div class="screen" id="start">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<img alt="ARTifacts logo" class="logo" id="logoImg" src="/mnt/data/artifacts logo.png"/>
</header>
<div class="content start-center" style="gap:10px;">
<div style="text-align:center">
<h1 style="margin:6px 0 4px">Welcome to ARTifacts</h1>
<p style="margin:0;color:#666">Interactive AR gallery prototype — choose a mode to continue</p>
</div>
<div class="modes" style="max-width:420px;margin-top:20px">
<button class="primary" data-screen="artistHome" onclick="go('artistHome')">Artist Mode</button>
<button class="primary" data-screen="eventHome" onclick="go('eventHome')">Event Manager</button>
<button class="primary" data-screen="viewerHome" onclick="go('viewerHome')">Viewer Mode</button>
</div>
</div>
</div>
<!-- ARTIST HOME -->
<div class="screen hidden" id="artistHome">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="start" onclick="go('start')">←</button>
<div style="font-weight:800">Artist Mode</div>
</header>
<div class="content" id="artistContent">
<div class="card" style="display:flex;gap:12px;align-items:center;">
<div style="width:96px;height:96px;border-radius:12px;overflow:hidden;background:#eee;display:flex;align-items:center;justify-content:center">
<img alt="avatar" id="artistAvatar" src="/mnt/data/artifacts logo.png" style="width:100%;height:100%;object-fit:cover"/>
</div>
<div style="flex:1">
<div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
<h2 id="artistNameHeading" style="margin:0">Artist Name</h2>
<button class="small-btn" data-screen="editProfile" onclick="go('editProfile')">Edit Profile</button>
</div>
<div id="artistBioText" style="color:#666;margin-top:8px">Artist bio goes here.</div>
<div id="artistAgeText" style="color:#666;margin-top:4px">Age: —</div>
<div id="artistCountryText" style="color:#666;margin-top:4px">Country: —</div>
</div>
</div>
<div class="card">
<div style="display:flex;justify-content:space-between;align-items:center">
<h3 style="margin:0">Portfolio</h3>
<div><button class="small-btn" data-screen="upload" onclick="go('upload')">+ Upload</button></div>
</div>
<div class="stat-row" style="margin-top:12px">
<div class="stat">Total artworks<br/><strong id="statCount">0</strong></div>
<div class="stat">Events<br/><strong id="statEvents">0</strong></div>
<div class="stat">Most recent<br/><strong id="statRecent">—</strong></div>
</div>
<div class="art-grid" id="artistGrid" style="margin-top:12px"></div>
</div>
<div class="card">
<h3 style="margin:0">Artist Tools</h3>
<div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
<button class="small-btn" data-screen="manageArtworks" onclick="go('manageArtworks')">Manage Artworks</button>
<button class="small-btn" data-screen="eventHome" onclick="go('eventHome')">Create Event</button>
</div>
</div>
</div>
</div>
<!-- MANAGE ARTWORKS (NEW SCREEN) -->
<div class="screen hidden" id="manageArtworks">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="artistHome" onclick="go('artistHome')">←</button>
<div style="font-weight:800">Manage Artworks</div>
</header>
<div class="content">
<div class="card">
<h3 style="margin:0 0 6px 0">Your Artworks</h3>
<div class="manage-list" id="manageList" style="margin-top:12px"></div>
<div style="margin-top:12px"><button class="btn-primary" data-screen="upload" onclick="go('upload')">Upload New Artwork</button></div>
</div>
</div>
</div>
<!-- EDIT PROFILE -->
<div class="screen hidden" id="editProfile">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="artistHome" onclick="go('artistHome')">←</button>
<div style="font-weight:800">Edit Profile</div>
</header>
<div class="content">
<div class="card">
<div class="field">
<label>Profile Image</label>
<input accept="image/*" id="avatarInput" type="file"/>
</div>
<div class="field">
<label>Name</label>
<input id="artistNameInput" placeholder="Artist name" type="text"/>
</div>
<div class="field">
<label>Bio</label>
<textarea id="artistBioInput" placeholder="Short bio"></textarea>
</div>
<div class="field">
<label>Age</label>
<input id="artistAgeInput" placeholder="Age" type="number"/>
</div>
<div class="field">
<label>Country</label>
<input id="artistCountryInput" placeholder="Country" type="text"/>
</div>
<div class="controls">
<button class="btn-primary" id="saveProfileBtn">Save</button>
<button class="btn-cancel" onclick="cancelEditProfile()">Cancel</button>
</div>
</div>
</div>
</div>
<!-- UPLOAD ARTWORK -->
<div class="screen hidden" id="upload">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="artistHome" onclick="go('artistHome')">←</button>
<div style="font-weight:800">Upload Artwork</div>
</header>
<div class="content">
<div class="card">
<div class="field">
<label>Artwork Image</label>
<input accept="image/*" id="artFile" type="file"/>
</div>
<div class="thumb" id="artPreview" style="margin-top:12px;min-height:200px;display:flex;align-items:center;justify-content:center">Preview</div>
<div class="field">
<label>Title</label>
<input id="artTitle" placeholder="Title" type="text"/>
</div>
<div class="field">
<label>Description</label>
<textarea id="artDesc" placeholder="Description"></textarea>
</div>
<div class="controls">
<button class="btn-primary" id="saveArtBtn">Save</button>
<button class="btn-cancel" id="cancelArtBtn">Cancel</button>
</div>
</div>
</div>
</div>
<!-- EDIT ARTWORK -->
<div class="screen hidden" id="editArtwork">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="manageArtworks" onclick="go('manageArtworks')">←</button>
<div style="font-weight:800">Edit Artwork</div>
</header>
<div class="content">
<div class="card">
<div class="thumb" id="editArtPreview">Preview</div>
<div class="field"><label>Title</label><input id="editArtTitle" type="text"/></div>
<div class="field"><label>Description</label><textarea id="editArtDesc"></textarea></div>
<div class="controls">
<button class="btn-primary" id="applyEditBtn">Save</button>
<button class="btn-cancel" onclick="cancelEditArtwork()">Cancel</button>
</div>
</div>
</div>
</div>
<!-- VIEWER HOME -->
<div class="screen hidden" id="viewerHome">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="start" onclick="go('start')">←</button>
<div style="font-weight:800">Viewer Mode</div>
</header>
<div class="content">
<div class="card">
<h3 style="margin:0">Public Gallery</h3>
<div class="art-grid" id="publicGallery" style="margin-top:12px"></div>
</div>
</div>
</div>
<!-- VIEWER OVERLAY -->
<div aria-hidden="true" class="hidden" id="viewerOverlay">
<div class="viewer-top" onclick="closeViewer()">←</div>
<div class="viewer-close" id="viewerClose" onclick="closeViewer()">×</div>
<div class="viewer-nav viewer-prev" id="viewerPrev" onclick="viewerPrev()">◀</div>
<img alt="Artwork" id="viewerImg" src=""/>
<div class="viewer-nav viewer-next" id="viewerNext" onclick="viewerNext()">▶</div>
<div class="viewer-caption" id="viewerCaption"></div>
</div>
<!-- EVENT MANAGER -->
<div class="screen hidden" id="eventHome">
<header class="appbar" style="width:100%;max-width:var(--max-w);">
<button class="back" data-screen="start" onclick="go('start')">←</button>
<div style="font-weight:800">Event Manager</div>
</header>
<div class="content">
<div class="card">
<h3 style="margin:0 0 8px 0">Event Info</h3>
<div class="field"><label>Event Name</label><input id="evtName" type="text"/></div>
<div class="field"><label>Date</label><input id="evtDate" type="date"/></div>
<div class="field"><label>Location</label><input id="evtLoc" type="text"/></div>
<div class="field"><label>Description</label><textarea id="evtDesc"></textarea></div>
<div class="controls">
<button class="btn-primary" id="saveEventBtn">Save Event</button>
<button class="btn-cancel" onclick="cancelEvent()">Cancel</button>
</div>
</div>
<div class="card" style="margin-top:12px">
<h3 style="margin:0 0 8px 0">Event Gallery</h3>
<div class="art-grid cols-3" id="eventGallery" style="margin-top:8px"></div>
<div style="display:flex;gap:8px;align-items:center;margin-top:12px;flex-wrap:wrap">
<input accept="image/*" id="eventArtFile" type="file"/>
<button class="small-btn" id="addEventArtBtn">Add to Event Gallery</button>
</div>
</div>
<div class="card" style="margin-top:12px;text-align:center">
<h3 style="margin:0 0 8px 0">Event QR</h3>
<div class="thumb" id="qrBox" style="width:200px;height:200px;margin-left:auto;margin-right:auto">QR</div>
<div style="margin-top:12px"><button class="btn-primary" id="genQRBtn">Generate QR</button></div>
</div>
</div>
</div>
<!-- bottom bar -->
<div aria-label="Main navigation" class="bottom-bar" role="navigation">
<div class="bottom-item" data-screen="artistHome" onclick="go('artistHome')">Artist</div>
<div class="bottom-item" data-screen="eventHome" onclick="go('eventHome')">Events</div>
<div class="bottom-item" data-screen="viewerHome" onclick="go('viewerHome')">Viewer</div>
</div>

<script src="js/init.js" type="module"></script>
</body>
</html>
